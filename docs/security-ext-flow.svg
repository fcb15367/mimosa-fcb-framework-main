<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1171px" height="831px" viewBox="-0.5 -0.5 1171 831" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2021-06-16T07:05:24.363Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_16_0) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/12.1.7 Chrome/78.0.3905.1 Electron/7.0.0 Safari/537.36&quot; etag=&quot;tYtWfmrHUKKLDUjfxwAK&quot; version=&quot;12.1.7&quot; type=&quot;device&quot; pages=&quot;1&quot;&gt;&lt;diagram id=&quot;uxNXFe0IztAzIu_zQ_QT&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="160" y="47" width="1010" height="783" fill="#ffffff" stroke="#000000" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(584.5,799.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="160" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 162px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">JaegerSpanContext<br />Map&lt;String, String&gt; baggage;</div></div></foreignObject><text x="80" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">JaegerSpanContext&lt;br&gt;Map&lt;String, String&gt; baggage;</text></switch></g><path d="M 665 550 L 665 643.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 665 648.88 L 661.5 641.88 L 665 643.63 L 668.5 641.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(676.5,581.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="221" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">在 baggage 中:<br />Principal -&gt; JSON of UserDetails<br /><span style="background-color: rgb(248 , 249 , 250)">Credentials -&gt; String from request header</span></div></div></foreignObject><text x="111" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="190" y="82" width="950" height="468" rx="70.2" ry="70.2" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(648.5,533.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">App A</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">App A</text></switch></g><path d="M 420 202 L 440 202 L 430 202 L 443.63 202" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 448.88 202 L 441.88 205.5 L 443.63 202 L 441.88 198.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 320 287 L 320 442 L 443.63 442" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 448.88 442 L 441.88 445.5 L 443.63 442 L 441.88 438.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(224.5,384.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="111" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">JSON of UserDetails</div></div></foreignObject><text x="56" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">JSON of UserDetails</text></switch></g><rect x="220" y="117" width="200" height="170" rx="25.5" ry="25.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(224.5,153.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="190" height="96" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 192px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">ScopeManager<br />找所有的 ScopeInterceptor<br /><br />[PreAuthenticatedScopeInterceptor]<br /><br /><br />&lt;opentracing&gt;</div></div></foreignObject><text x="95" y="54" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 40 202 L 213.63 202" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 218.88 202 L 211.88 205.5 L 213.63 202 L 211.88 198.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(74.5,181.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="51" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">2類 token</div></div></foreignObject><text x="26" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">2類 token</text></switch></g><ellipse cx="25" cy="179.5" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 25 187 L 25 212 M 25 192 L 10 192 M 25 192 L 40 192 M 25 212 L 10 232 M 25 212 L 40 232" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(10.5,239.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="28" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">Actor</div></div></foreignObject><text x="14" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Actor</text></switch></g><rect x="345" y="650" width="640" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(648.5,723.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="32" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 34px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">App B</div></div></foreignObject><text x="16" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">App B</text></switch></g><path d="M 585 287 L 585 380.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 585 385.88 L 581.5 378.88 L 585 380.63 L 588.5 378.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(594.5,331.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="51" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">2類 token</div></div></foreignObject><text x="26" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">2類 token</text></switch></g><path d="M 720 202 L 740 202 L 730 202 L 743.63 202" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 748.88 202 L 741.88 205.5 L 743.63 202 L 741.88 198.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="450" y="117" width="270" height="170" rx="25.5" ry="25.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(463.5,160.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="242" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 242px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">AbstractPreAuthenticatedProcessingFilter<br /><br />[BaggageRequestHeaderAuthenticationFilter]<br /><br /><br />&lt;spring-security&gt;</div></div></foreignObject><text x="121" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 585 497 L 585 517 L 126.37 517" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 121.12 517 L 128.12 513.5 L 126.37 517 L 128.12 520.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(304.5,511.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="82" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">驗證 2類 token </div></div></foreignObject><text x="41" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">驗證 2類 token </text></switch></g><rect x="450" y="387" width="270" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(495.5,407.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="178" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 180px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">UserDetailsService<br /><br />[UserDetailsByUsernameService]<br /><br />&lt;spring-security&gt;</div></div></foreignObject><text x="89" y="40" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="1020" y="138.5" width="90" height="210" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(1038.5,237.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="52" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 54px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">Controller</div></div></foreignObject><text x="26" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">Controller</text></switch></g><path d="M 970 202 L 995 202 L 995 244 L 1013.63 244" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1018.88 244 L 1011.88 247.5 L 1013.63 244 L 1011.88 240.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="750" y="130" width="220" height="143" rx="21.45" ry="21.45" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(777.5,160.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="164" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 164px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">AuthenticationSuccessHandler<br /><br />[PreAuthenticatedPropagation]<br /><br /><br />&lt;spring-security&gt;</div></div></foreignObject><text x="82" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="750" y="372" width="220" height="125" rx="18.75" ry="18.75" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(764.5,393.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="190" height="82" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 192px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">BasicAuthenticationEntryPoint<br /><br />[ExceptionAuthenticationEntryPoint]<br /><br /><br />&lt;spring-security&gt;</div></div></foreignObject><text x="95" y="47" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="0" y="487" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(11.5,510.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="96" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 98px; white-space: nowrap; overflow-wrap: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">客戶安控 backend</div></div></foreignObject><text x="48" y="12" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">客戶安控 backend</text></switch></g><path d="M 215 0 L 405 0 L 405 100 L 330 100 L 310 130 L 310 100 L 215 100 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(217.5,29.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="186" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">試著從 baggage 找 Principle 及 Credentials, 找到就登入, 沒有就繼續往右</div></div></foreignObject><text x="93" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">試著從 baggage 找 Principle 及 Credentials, 找到就登入, 沒有就繼續往右</text></switch></g><path d="M 515 0 L 705 0 L 705 100 L 630 100 L 610 130 L 610 100 L 515 100 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(517.5,29.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="186" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">試著從 request header 找 Principle 及 Credentials, 找到就登入, 沒有就丟出例外</div></div></foreignObject><text x="93" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">試著從 request header 找 Principle 及 Credentials, 找到就登入, 沒有就丟出例外</text></switch></g><path d="M 350 260 L 570 260 L 570 395 L 502 395 L 504 417 L 482 395 L 350 395 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(352.5,265.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="216" height="124" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 216px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">登入過程會呼叫這隻載入 UserDetails:<br /><br />1. 若登入字串包含 Bearer 字眼, 擷取 token 後外呼客戶安控 backend<br />2. 若無 Bearer 字眼, 試著以 JSON decode 成 UserDetails<br /><br />以上任一失敗, 若為 strict mode 則丟例外, 反之以匿名登入</div></div></foreignObject><text x="108" y="68" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 820 17 L 1010 17 L 1010 117 L 935 117 L 915 147 L 915 117 L 820 117 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(822.5,46.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="186" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">登入成功後, 就把 UserDetails encode 成 JSON 後, 放入 baggage 往後傳播</div></div></foreignObject><text x="93" y="26" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">登入成功後, 就把 UserDetails encode 成 JSON 後, 放入 baggage 往後傳播</text></switch></g><path d="M 800 290 L 990 290 L 990 360 L 915 360 L 895 390 L 895 360 L 800 360 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(802.5,311.5)"><switch><foreignObject style="overflow:visible;" pointer-events="none" width="186" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 186px; white-space: nowrap; overflow-wrap: normal; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">登入過程中發生任何例外, 就會被這隻捕捉, 直接回傳錯誤結構</div></div></foreignObject><text x="93" y="19" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">登入過程中發生任何例外, 就會被這隻捕捉, 直接回傳錯誤結構</text></switch></g></g></svg>